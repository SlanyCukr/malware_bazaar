import graphviz


def create_activity_diagram():
    dot = graphviz.Digraph('BatchVirusTotalActivityDiagram', format='svg')
    dot.attr(rankdir='TB')

    # Define nodes
    dot.node('Start', '', shape='circle', style='filled', fillcolor='black')
    dot.node('A', 'Získání všech výsledků API z databáze', shape='box')
    dot.node('B', 'Extrahování všech entit label, category, name z výsledků API', shape='box')
    dot.node('C', 'Vložení všech entit label, category, name do DB', shape='box')
    dot.node('D', 'Získání ID všech vložených entit z DB', shape='box')
    dot.node('E', 'Nahrazení textové reprezentace entit ve slovnících za ID', shape='box')
    dot.node('F', 'Finální transformace před vložením do DB', shape='box')
    dot.node('G', 'Vložení do DB', shape='box')
    dot.node('End', '', shape='doublecircle', style='filled', fillcolor='black')

    # Connect nodes
    dot.edge('Start', 'A')
    dot.edge('A', 'B')
    dot.edge('B', 'C')
    dot.edge('C', 'D')
    dot.edge('D', 'E')
    dot.edge('E', 'F')
    dot.edge('F', 'G')
    dot.edge('G', 'End')

    return dot

# Generate and display the diagram
activity_diagram = create_activity_diagram()
activity_diagram.render('BatchVirusTotalActivityDiagram')

